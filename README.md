# spacy_training

## **Directories**

### data

 - Contains raw NER labelled datasets
   - First harem
   - Paramopama
   - Paramopama + second harem
 - All datasets contain the labels: 'O', 'ORGANIZACAO', 'LOCAL', 'PESSOA', 'TEMPO'.
 - The first harem data set also contains the 'VALOR' label.

 ### prep_data

 - Contains prepared datasets to be recognized by spacy convert command

 ### spacy_data

 - Contains data that will be fed to models, generated .spacy files by spacy convert

 ### displacy

 - Some displacy generated files by evaluate commands

 ### labels

 - Label documents for training generated by init labels in training.py

 ### metrics

 - Json files of metrics given by spacy evaluate commands

 ### models

 - trained models
   - **harem1_par**
     - training set: harem 1
     - evaluation set: paramonpana + second harem
     - 
   - **par_harem1**
     - training set: paramonpana + second harem
     - evaluation set: harem 1
   - **harem1**
     - training set: harem 1
     - evaluation set: harem 1
   - **pa_harem2**
     - training set: paramonpana + second harem
     - evaluation set: paramonpana + second harem

## **Evaluation**

Each model was evaluated with both harem1 and Paramopama + second harem.

Ideally, I would like to test it with an external data set, but for now this is it.

While the overall f-score is relevant, it is important to check the f-score for each tag, since the presence/absence of the tag 'VALOR' lowers the global f-score.

I also present a baseline for the 'LOC', 'ORG' and 'PER' tags available in the 'pt_core_news_md' dataset.

Precision and recall metrics are available in the metrics folder or on the **evaluate_nb.ipynb** , under each model file. Table only shows f-score for simplicity.

| Model      | dataset | Global f-s | LOC f-s | ORG f-s | TEMPO f-s | PER f-s | VALOR f-s |
|------------|---------|:----------:|:-------:|:-------:|:---------:|:-------:|:---------:|
| baseline   | harem1  |    0.397   |  0.575  |  0.325  |     0     |  0.550  |     0     |
| harem1_par | harem1* |    0.871   |  0.886  |  0.827  |   0.783   |  0.939  |   0.832   |
| harem1_par | par_h2  |    0.642   |  0.764  |  0.521  |   0.576   |  0.652  |     0     |
| par_harem1 | harem1  |    0.569   |  0.705  |  0.535  |   0.473   |  0.603  |     0     |
| par_harem1 | par_h2* |    0.856   |  0.894  |  0.756  |   0.820   |  0.887  |     0     |
| harem1     | harem1* |            |         |         |           |         |           |
| harem1     | par_h2  |            |         |         |           |         |           |
| pa_harem2  | harem1  |            |         |         |           |         |           |
| pa_harem2  | par_h2* |            |         |         |           |         |           |